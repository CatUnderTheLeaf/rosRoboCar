<!-- 
export ROS_IP=192.168.0.51
export ROS_MASTER_URI=http://192.168.0.51:11311/

export ROS_IP=192.168.0.133
export ROS_MASTER_URI=http://192.168.0.51:11311/

export ROS_IP=10.65.0.56
export ROS_MASTER_URI=http://10.65.0.56:11311/

export ROS_IP=10.65.0.72
export ROS_MASTER_URI=http://10.65.0.56:11311/
 -->

<launch>

  <!-- RUN ON THE CAR -->

    <!-- include camera launch file 
    publish image
    -->
    <include file="$(find donkeycar)/launch/camera.launch" />

    <!-- Steering and throttle of the donkeycar -->
    <arg name="servos_config" default="$(find donkey_actuator)/config/servos.yaml" />
    <arg name="servo_topic" default="servos_proportional" />
    
    <!-- transform ServoArray to PWM signal -->
    <node pkg="i2cpwm_board" name="i2cpwm_board_node" type="i2cpwm_board" output="screen" />
    
    <!-- transform Twist to ServoArray -->
    <rosparam command="load" file="$(arg servos_config)" />
    <node name="donkey_actuator_node" pkg="donkey_actuator" type="donkey_actuator_node.py" output="screen"/>

    <!-- Stop the car and all nodes -->
    <node pkg="donkey_actuator" name="stop_car" type="stop_car_node.py" output="screen" required="true">
    </node>


    <!-- include lane-keeping launch file 
    transform image to Twist
    -->
    <include file="$(find donkeycar)/launch/lanekeep.launch" />

</launch>
